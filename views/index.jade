extends layout

block content
  #content.pure-g-r
    #hero.pure-u-1
      h1(onclick="jshBckmn.setRandomThought(this.parentNode.children[1]);") Joshua Beckman
      p(onclick="jshBckmn.setRandomThought(this);")#thoughtBubble.lead.hint
    #contact.pure-u-1-3
      h3
        a(href="mailto:jsh@bckmn.com?subject=Yo, I saw your website!") jsh@bckmn.com
      h3 847.975.7110
      h3
        del.muted Too busy.
        br
        |  Looking for projects.
        br
        br
      h3
        a.btn(href="/api?callback=foo") Access my API
      h3
        br
        // a(onclick="openStrip('about');") About

    #about.pure-u-1-3
      p.muted WWW
      h3
        a(href="http://naked-wordpress.bckmn.com", target="_blank") Naked Wordpress
      h3
        a(href="http://atomist.co", target="_blank") Atomist.co
      h3
        a(href="http://ontrack.io", target="_blank") OnTrack.io
      h3
        a(href="/polarpageviews", target="_blank") Polar Pageviews
      h3
        a(href="http://weekaway.com", target="_blank") WeekAway.com
      h3
        a(href="http://rankommend.com", target="_blank") Rankommend.com
    .pure-u-1-3
      p.muted PICS
      h3
        a(onclick="openStrip('latest');") Latest
      h3
        a(onclick="openStrip('falling');") Faces of The Falling
      h3
        a(onclick="openStrip('illiniImprov');") Illini Improv: Behind The Curtain
      h3
        a(onclick="openStrip('sports');") Sporting Fun
      h3
        a(href="https://medium.com/joe-mctigue", target="_blank") Joe McTigue
      
      ul#repos-list
  .pure-g-r
    .pure-u-1.lightbox.transition
      ul#strip.gallery
  
  include repoCaller
  include scrollTo
  include creator
  script
    window.jshBckmn = {
      setRandomThought: function(elem){
        elem.innerText = (jshBckmn.thoughts[Math.floor(Math.random() * jshBckmn.thoughts.length)] + '.');
        elem.style.opacity = '1';
      },
      thoughts: !{JSON.stringify(thoughts)}
    };
    var setFirstThought = window.setTimeout(jshBckmn.setRandomThought, 1000, document.getElementById('thoughtBubble'));
    function openStrip(set){
      document.body.style.background = 'rgba(0,0,0,0.8)';
      var images = !{JSON.stringify(images)},
          imageSrc = !{JSON.stringify(imageSrc)},
          lb = document.getElementsByClassName('lightbox')[0],
          lbHeight = 460;
      lb.style.height = lbHeight.toString()+'px';
      scrollTo(document.body, lbHeight-(window.innerHeight - document.getElementById('content').clientHeight), 1250);
      loadImages(imageSrc, document.getElementById('strip'), images[set], function(){
        var imgs = document.getElementsByClassName('gallery-image'),
            indMargin = 3,
            totalWidth = 0;
        if(imgs.length == images[set].length){
          for(i=0;i<imgs.length;i++){
            totalWidth += imgs[i].offsetWidth+(indMargin*2);
          }
          totalWidth < window.innerWidth ? totalWidth = window.innerWidth : totalWidth = totalWidth;
          document.getElementsByClassName('gallery')[0].style.width = totalWidth.toString()+'px';
        }
      });
    }
    function loadImages(imageSrc, gal, imageSet, callback){
      gal.innerHTML = '';
      for(i=0;i<imageSet.length;i++){
        var li = create('li',{});
        if(imageSet[i].src){
          li.appendChild(
            create('img',{
              className: 'gallery-image',
              src: imageSrc+imageSet[i].src,
              alt: imageSet[i].alt,
              onload: callback,
              title: imageSet[i].alt
            })
          );
        }else{
          li.appendChild(
            create('p',{
              className: 'gallery-image lead',
              onload: callback,
              innerText: imageSet[i].text
            })
          );
        }
        gal.appendChild(li);
      }
    }